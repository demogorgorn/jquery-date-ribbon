(function(d){d.fn.extend({dateRibbon:function(e){e=jQuery.extend({title:null,titleFormat:"days",className:"ribbon",href:"#",target:null,date:new Date,functionBefore:function(){return!0},functionAfter:function(){}},e);return this.each(function(){new d.createDateRibbon(this,e)})}});d.browser={};d.browser.msie=!1;d.browser.version=0;navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(d.browser.msie=!0,d.browser.version=RegExp.$1);d.createDateRibbon=function(e,a){var b={version:"1.0",author:"Yogesh Kumar",
website:"www.bluejson.com",obj:{$this:d(e)},id:{},cl:{ribbonA:a.className,ribbonPieceDiv:"ribbon-piece",ribbonTopDiv:"top",ribbonBottomDiv:"bottom",ribbonTailDiv:"tail",ribbonTailLeftDiv:"left",ribbonTailRightDiv:"right"},monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sept Oct Nov Dec".split(" "),ribbonFunction:{init:function(){1==a.functionBefore()&&(b.obj.$this.html(""),b.ribbonFunction.createRibbonA().appendTo(b.obj.$this),a.functionAfter())},createRibbonA:function(){var c=d("<a/>").addClass(b.cl.ribbonA),
g=b.ribbonFunction.getMonthAndDay();a.title=b.ribbonFunction.createTitle();c.attr({href:a.href,title:a.title});null!=a.target&&c.attr("target",a.target);b.ribbonFunction.createTopRibbon(g.month).appendTo(c);b.ribbonFunction.createBottomRibbon(g.day).appendTo(c);b.ribbonFunction.createTailRibbon().appendTo(c);return c},createTopRibbon:function(c){return d("<div/>").addClass(b.cl.ribbonTopDiv).addClass(b.cl.ribbonPieceDiv).html(c)},createBottomRibbon:function(c){return d("<div/>").addClass(b.cl.ribbonBottomDiv).addClass(b.cl.ribbonPieceDiv).html(c)},
createTailRibbon:function(){var c=d("<div/>").addClass(b.cl.ribbonTailDiv),a=d("<div/>").addClass(b.cl.ribbonTailLeftDiv).addClass(b.cl.ribbonPieceDiv);a.appendTo(c);var f=d("<div/>").addClass(b.cl.ribbonTailRightDiv).addClass(b.cl.ribbonPieceDiv);f.appendTo(c);1==d.browser.msie&&(a.css({left:"-25px"}),f.css({right:"-25px"}),c.css({width:"33px","border-right":"1px solid #666","border-left":"1px solid #666","border-top":"0px none","border-bottom":"0px none"}));return c},getMonthAndDay:function(){return{month:b.monthNames[a.date.getMonth()],
day:a.date.getDate()}},createTitle:function(){if(void 0==a.title||null==a.title){var c=new Date,d="",f=0,e={minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:2592E6,years:31536E6};c.getMonth()==a.date.getMonth()&&c.getDate()==a.date.getDate()&&c.getFullYear()==a.date.getFullYear()?d="Today":a.date>c?(f=b.ribbonFunction.getDateDifference(a.date,c),d=parseInt(f/e[a.titleFormat])+" "+a.titleFormat+" ahead"):a.date<c&&(f=b.ribbonFunction.getDateDifference(c,a.date),d=parseInt(f/e[a.titleFormat])+
" "+a.titleFormat+" ago");return d}return a.title},getDateDifference:function(a,b){return a.getTime()-b.getTime()}}};b.ribbonFunction.init()}})(jQuery);
