(function(a){a.fn.extend({dateRibbon:function(b){b=jQuery.extend({title:null,titleFormat:"days",className:"ribbon",href:"#",target:null,date:new Date,functionBefore:function(){return true},functionAfter:function(){}},b);return this.each(function(){new a.createDateRibbon(this,b)})}});a.createDateRibbon=function(b,c){var d={version:"1.0",author:"Yogesh Kumar",website:"www.bluejson.com",obj:{$this:a(b)},id:{},cl:{ribbonA:c.className,ribbonPieceDiv:"ribbon-piece",ribbonTopDiv:"top",ribbonBottomDiv:"bottom",ribbonTailDiv:"tail",ribbonTailLeftDiv:"left",ribbonTailRightDiv:"right"},monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],ribbonFunction:{init:function(){if(c.functionBefore()==true){d.obj.$this.html("");d.ribbonFunction.createRibbonA().appendTo(d.obj.$this);c.functionAfter()}},createRibbonA:function(){var b=a("<a/>").addClass(d.cl.ribbonA);var e=d.ribbonFunction.getMonthAndDay();c.title=d.ribbonFunction.createTitle();b.attr({href:c.href,title:c.title});if(c.target!=null)b.attr("target",c.target);d.ribbonFunction.createTopRibbon(e.month).appendTo(b);d.ribbonFunction.createBottomRibbon(e.day).appendTo(b);d.ribbonFunction.createTailRibbon().appendTo(b);return b},createTopRibbon:function(b){var c=a("<div/>").addClass(d.cl.ribbonTopDiv).addClass(d.cl.ribbonPieceDiv).html(b);return c},createBottomRibbon:function(b){var c=a("<div/>").addClass(d.cl.ribbonBottomDiv).addClass(d.cl.ribbonPieceDiv).html(b);return c},createTailRibbon:function(){var b=a("<div/>").addClass(d.cl.ribbonTailDiv);var c=a("<div/>").addClass(d.cl.ribbonTailLeftDiv).addClass(d.cl.ribbonPieceDiv);c.appendTo(b);var e=a("<div/>").addClass(d.cl.ribbonTailRightDiv).addClass(d.cl.ribbonPieceDiv);e.appendTo(b);if(a.browser.msie==true){c.css({left:"-25px"});e.css({right:"-25px"});b.css({width:"33px","border-right":"1px solid #666","border-left":"1px solid #666","border-top":"0px none","border-bottom":"0px none"})}return b},getMonthAndDay:function(){var a={month:d.monthNames[c.date.getMonth()],day:c.date.getDate()};return a},createTitle:function(){if(c.title==undefined||c.title==null){var a=new Date,b="";var e=0;var f={minutes:1e3*60,hours:1e3*60*60,days:1e3*60*60*24,weeks:1e3*60*60*24*7,months:1e3*60*60*24*30,years:1e3*60*60*24*365};if(a.getMonth()==c.date.getMonth()&&a.getDate()==c.date.getDate()&&a.getFullYear()==c.date.getFullYear()){b="Today"}else if(c.date>a){e=d.ribbonFunction.getDateDifference(c.date,a);b=parseInt(e/f[c.titleFormat])+" "+c.titleFormat+" ahead"}else if(c.date<a){e=d.ribbonFunction.getDateDifference(a,c.date);b=parseInt(e/f[c.titleFormat])+" "+c.titleFormat+" ago"}return b}else{return c.title}},getDateDifference:function(a,b){return a.getTime()-b.getTime()}}};d.ribbonFunction.init()}})(jQuery)
